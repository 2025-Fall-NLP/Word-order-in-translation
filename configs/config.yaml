language_pairs:
  # Very High Similarity
  - [gl, pt]
  - [ru, uk]
  # High Similarity
  - [pt, ro]
  - [gl, it]
  # Medium-High Similarity
  - [en, de]
  # Medium Similarity
  - [ko, ja]
  - [ja, zh]
  - [ko, zh]
  # Low Similarity
  - [en, fr]
  - [en, es]
  - [en, ru]
  # Very Low Similarity
  - [en, ko]
  - [en, ja]
  - [en, zh]
  - [en, ar]

datasets:
  similarity:
    type: flores
    name: facebook/flores
    split: dev
  evaluation:
    type: flores
    name: facebook/flores
    split: devtest
  training:
    type: nllb
    name: allenai/nllb
    split: train
    max_samples: 10000

similarity:
  - type: mdeberta
    model: microsoft/mdeberta-v3-base
    pooling: mean
    batch_size: 64
    max_length: 512
  - type: labse
    model: sentence-transformers/LaBSE
    batch_size: 64
  - type: script
  - type: uriel
    features: syntax_knn+phonology_knn+inventory_knn

translation:
  model:
    type: nllb
    name: facebook/nllb-200-distilled-600M
    max_length: 256
    num_beams: 4
  evaluation:
    - type: bleu
    - type: chrf
    - type: comet
      model: Unbabel/wmt22-comet-da
      batch_size: 64
    - type: bertscore
      model: bert-base-multilingual-cased
      batch_size: 64
  training:
    epochs: 4
    batch_size: 16
    gradient_accumulation_steps: 1
    gradient_checkpointing: true
    learning_rate: 3.0e-5
    warmup_ratio: 0.06
    weight_decay: 0.01
    early_stopping_patience: 2
    max_length: 128
    bf16: true

analysis:
  scatter_4d:
    - x: uriel_none
      y: delta_comet
      size: labse_none
      color: script_none
    - x: uriel_none
      y: finetuned_comet
      size: labse_none
      color: script_none
  heatmap:
    - name: heatmap_delta
      sim_metrics: [mdeberta_mean, labse_none, uriel_none, script_none]
      trans_metrics: [delta_bleu, delta_comet, delta_chrf, delta_bertscore]
    - name: heatmap_finetuned
      sim_metrics: [mdeberta_mean, labse_none, uriel_none, script_none]
      trans_metrics: [finetuned_bleu, finetuned_comet, finetuned_chrf, finetuned_bertscore]

paths:
  output_dir: outputs/
  checkpoint_dir: checkpoints/
